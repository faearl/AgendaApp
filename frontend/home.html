<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Listen for changes on the alarm time selection dropdown
    document.getElementById('alarmTimeSelect').addEventListener('change', function() {
        const isCustomSelected = this.value === 'custom';

        // Set the display of the custom alarm input fields based on the selection
        document.getElementById('alarmHeading').style.display = isCustomSelected ? 'block' : 'none';
        document.getElementById('customAlarmDate').style.display = isCustomSelected ? 'block' : 'none';
        document.getElementById('customAlarmTime').style.display = isCustomSelected ? 'block' : 'none';

        // Optionally, you can set a meaningful heading when custom is selected
        if (isCustomSelected) {
            document.getElementById('alarmHeading').textContent = 'Set Custom Alarm:';
        }
    });
  });

</script>


<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar App</title>

    <link rel="stylesheet" href="home.css">
	  <script src='session_locator.js'></script>
  </head>
  <body>
    <div id="container">
      <div id="header">
        <div id="monthDisplay"></div>
        <div>
            <button id="backButton">Back</button>
            <button id="nextButton">Next</button>
        </div>

      </div>
	  
	  <div id="searchEngine">
        <label for="startDate" >Start Date:</label>
        <input type="date" id="searchStart">
        <label for="endDate">End Date:</label>
        <input type="date" id="searchEnd">
		<input type = "search" id="searchInput">
	  	<button id="searchButton">Search</button>
		<button id="shareButton">Share</button>
	  </div>
	  
	  <div id="searchModal" class="modal">
		<div class="searchResults">
			<h2>Search Results</h2>
			<ul id="searchResultsList"></ul>
		</div>
		<button id="exportSearchButton">Export</button>
      	<button id="closeSearchButton">Close</button>
	  </div>

	  <div id="shareModal" class="modal">
		Username <input type="text" id="shareUser"> <br>
		<label for="startDate" >Start Date:</label>
        <input type="date" id="shareStart"> <br>
        <label for="endDate">End Date:</label>
        <input type="date" id="shareEnd"> <br>
		<button id="confirmShare">Share</button>
      	<button id="cancelShare">Cancel</button>
	  </div>

	  
	  

      <div id="weekdays">
        <div>Sunday</div>
        <div>Monday</div>
        <div>Tuesday</div>
        <div>Wednesday</div>
        <div>Thursday</div>
        <div>Friday</div>
        <div>Saturday</div>
      </div>

      <div id="calendar"></div>

      <div id="exportEvents">
        <div id="exportTitle">Export Events</div>
        <p>Select the date range for the events you would like to export</p>
        <label for="startDate" id="startDate">Start Date:</label>
        <input type="date" id="sDate">
        <label for="endDate" id="endDate">End Date:</label>
        <input type="date" id="eDate">
        <button id="exportButton">Export Events</button>
      </div>
      
    </div>

    <!-- New modal specifically for editing existing events -->
    <div id="editEventModal" class="modal">
      <h2>Event Details</h2>
      <input id="editEventTitleInput" placeholder="Event Title" />

      <label for="eventCat">Category:</label>
      <select id="eventCat">
          <option value="personal">Personal</option>
          <option value="school">School</option>
          <option value="work">Work</option>
          <option value="custom">Custom</option>
      </select>

      <div id="newCategory" style="display: none;">
        <label for="newCategoryName">Category Name:</label>
        <input type="text" id="newCategoryName" placeholder="Enter category name"/>
        <input type="color" id ="categoryColor" value="#444444"/>
        <button id="submitCategory">Submit</button>
      </div> 

      <h2>Times:</h2>
      <label for="startTime">Start Time:</label>
	    <input type="time" id="startTime" name="startTime" required>

	    <label for="endTime">End Time:</label>
      <input type="time" id="endTime" name="endTime" required>

      <h2>Set an Alarm:</h2>
      <select id="alarmTimeSelect">
        <option value="5">5 mins before</option>
        <option value="10">10 mins before</option>
        <option value="15">15 mins before</option>
        <option value="60">60 mins before</option>
        <option value="custom">Customize</option>
		<option value="none" selected="selected">None</option>
      </select>
      
      <h4 id="alarmHeading"></h4>
      <label for="customAlarmDate" style="display: none;">Alarm Date:</label>
      <input type="date" id="customAlarmDate" style="display: none;">

      <label for="customAlarmTime" style="display: none;">Alarm Time:</label>
      <input type="time" id="customAlarmTime" style="display: none;">

  
      <h2>Add a New Note</h2>
      <textarea id="noteInput" placeholder="Note..." ></textarea>
      <label for="image">Upload a new picture:</label>
      <input type="file" id="image" name="image" accept="image/png, image/jpeg" />
	  <img id='image-display' style='width: 100%;' alt='loading...' />

      <h2> </h2>
	    <button id="updateButton">Save Event</button>
      <button id="closeButton" onclick="closeEditModal()">Cancel</button>
      <button id="deleteButton" onclick="deleteEvent()">Delete Event</button>

      
      
    </div>


    <div id="newEventModal">
      <h2>Day's Events</h2>
      <ul id="eventsList"></ul> <!-- List of events for the selected day -->
    
      <h2>New Event</h2>
      <input id="eventTitleInput" placeholder="Event Title" />
	  <button id="saveButton">Add</button>
      <button id="cancelButton">Close</button>
	  
    </div>
  </div>

  <div id="modalBackDrop"></div>

  <script src="./home.js"></script>
  </body>
</html>
